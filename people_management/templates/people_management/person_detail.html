{% extends 'dashboard/base.html' %}

{% block content %}
    <div class="container mt-5">
        <h2 class="text-center mb-4">Person Details</h2>

        <div class="card shadow-lg p-3 rounded">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>First Name:</strong> {{ person.first_name }}
                </li>
                <li class="list-group-item">
                    <strong>Last Name:</strong> {{ person.last_name }}
                </li>
                <li class="list-group-item">
                    <strong>Email:</strong> {{ person.email }}
                </li>
                <li class="list-group-item">
                    <strong>Phone Number:</strong> {{ person.phone_number }}
                </li>
                <li class="list-group-item">
                    <strong>Date of Birth:</strong> {{ person.date_of_birth }}
                </li>
                <li class="list-group-item">
                    <strong>Active:</strong>
                    {% if person.active %}
                        <span class="badge bg-success">Active</span>
                    {% else %}
                        <span class="badge bg-danger">Inactive</span>
                    {% endif %}
                </li>
                <li class="list-group-item">
                    <strong>Contracts:</strong>
                    <ul class="mt-2">
                        {% for contract in person.contracts.all %}
                          <li>
                            <a href="{% url 'people_management:contract_detail' contract.pk %}">
                              Contract from {{ contract.contract_start }} to {{ contract.contract_end }}
                            </a>
                          </li>
                        {% empty %}
                          <li>No contracts found.</li>
                        {% endfor %}
                    </ul>
                </li>
            </ul>

            <div class="mt-3 pe-3">
            <div class="d-flex justify-content-end gap-2">

                <!-- Always show Back (go to previous page) -->
                <button type="button"
                        class="btn btn-outline-secondary"
                        onclick="history.back();">
                Back
                </button>

                {% if perms.people_management.change_person %}
                <a href="{% url 'people_management:update_person' pk=person.id %}"
                    class="btn btn-outline-secondary">
                    Edit
                </a>
                {% endif %}

                {% if perms.people_management.delete_person %}
                <a href="{% url 'people_management:delete_person' pk=person.id %}"
                    class="btn btn-outline-secondary text-danger">
                    Delete
                </a>
                {% endif %}

              </div>
            </div>

        </div>
    </div>
{% endblock %}
